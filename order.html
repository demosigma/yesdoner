<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тапсырысыңыз</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
    <style>
        body {
    font-family: 'Humanist', sans-serif;}
    </style>
<body>

    <h1 id="orderHeading"></h1>
    <div id="order-details"></div>
    

    <script>
        let menuLanguage = localStorage.getItem('menuLanguage');
    if (menuLanguage === 'ru') {
      document.getElementById('orderHeading').textContent = "Ваш заказ";
    } else {
      document.getElementById('orderHeading').textContent = "Тапсырысыңыз";
    }
        let tg = window.Telegram.WebApp;
        tg.MainButton.isVisible = true;
        tg.BackButton.isVisible = true;
        // Retrieve order data from local storage
        const orderData = localStorage.getItem('orderData');

        // Function to display order details
        function displayOrderDetails(orderData) {
  const orderDetailsDiv = document.getElementById('order-details');
  const items = JSON.parse(orderData); // Parse the JSON string

  if (!items || items.length === 0) {
    orderDetailsDiv.innerHTML = '<p>No items in your order.</p>';
    return;
  }

  let htmlContent = '<ul>';
  items.forEach(item => {
    if (item.count > 0) {
      // Calculate item total price
      const itemTotal = item.count * item.price; 
      htmlContent += `<li>${item.count} x ${item.name}: ${itemTotal}₸</li>`;
    }
  });
  htmlContent += '</ul>';
  orderDetailsDiv.innerHTML = htmlContent;
}

// Display the order details if available
if (localStorage.getItem('orderData')) {
  displayOrderDetails(localStorage.getItem('orderData'));
  // localStorage.removeItem('orderData'); // Uncomment if you want to clear the data after displaying
} else {
  document.getElementById('order-details').innerHTML = '<p>No order data found.</p>';
}

        const lang = localStorage.getItem('menuLanguage');
        // Handle back button click
        if (lang == "ru") {
        Telegram.WebApp.onEvent("backButtonClicked", function() {

    window.location.href = "menu_ru.html";
});
        }
        else {
                    Telegram.WebApp.onEvent("backButtonClicked", function() {

    window.location.href = "index.html";
});
        }

        // Clear local storage on page load
        window.onload = function() {
            localStorage.removeItem('orderData');
            localStorage.removeItem('menuLanguage')
        };
    </script>
</body>
</html>
